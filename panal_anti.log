Run by AMM on 26 Jul 2017 10:24:55





================================================================================
 1 create antibiotic resistance prediction panels
================================================================================
ciprofloxacin

ciprofloxac |
         in |      Freq.     Percent        Cum.
------------+-----------------------------------
          r |        917       22.17       22.17
          s |      3,220       77.83      100.00
------------+-----------------------------------
      Total |      4,137      100.00
erythromycin

erythromyci |
          n |      Freq.     Percent        Cum.
------------+-----------------------------------
          r |      1,082       26.15       26.15
          s |      3,055       73.85      100.00
------------+-----------------------------------
      Total |      4,137      100.00
clindamycin

clindamycin |      Freq.     Percent        Cum.
------------+-----------------------------------
          r |      1,038       25.09       25.09
          s |      3,099       74.91      100.00
------------+-----------------------------------
      Total |      4,137      100.00
fusidicacid

fusidicacid |      Freq.     Percent        Cum.
------------+-----------------------------------
          r |        464       11.22       11.22
          s |      3,673       88.78      100.00
------------+-----------------------------------
      Total |      4,137      100.00
gentamicin

 gentamicin |      Freq.     Percent        Cum.
------------+-----------------------------------
          r |        232        5.61        5.61
          s |      3,905       94.39      100.00
------------+-----------------------------------
      Total |      4,137      100.00
mupirocin

  mupirocin |      Freq.     Percent        Cum.
------------+-----------------------------------
          r |         47        1.14        1.14
          s |      4,090       98.86      100.00
------------+-----------------------------------
      Total |      4,137      100.00
penicillin

 penicillin |      Freq.     Percent        Cum.
------------+-----------------------------------
          r |      3,493       84.43       84.43
          s |        644       15.57      100.00
------------+-----------------------------------
      Total |      4,137      100.00
rifampicin

 rifampicin |      Freq.     Percent        Cum.
------------+-----------------------------------
          r |         72        1.74        1.74
          s |      4,065       98.26      100.00
------------+-----------------------------------
      Total |      4,137      100.00
tetracycline

tetracyclin |
          e |      Freq.     Percent        Cum.
------------+-----------------------------------
          r |        376        9.09        9.09
          s |      3,761       90.91      100.00
------------+-----------------------------------
      Total |      4,137      100.00
trimethoprim

trimethopri |
          m |      Freq.     Percent        Cum.
------------+-----------------------------------
          r |        534       12.91       12.91
          s |      3,603       87.09      100.00
------------+-----------------------------------
      Total |      4,137      100.00
vancomycin

 vancomycin |      Freq.     Percent        Cum.
------------+-----------------------------------
          s |      4,137      100.00      100.00
------------+-----------------------------------
      Total |      4,137      100.00
methicillin

methicillin |      Freq.     Percent        Cum.
------------+-----------------------------------
          r |      1,183       28.60       28.60
          s |      2,954       71.40      100.00
------------+-----------------------------------
      Total |      4,137      100.00
save panal
basic antibiotic prediction counts

----------------------------------------------------------------------------------------------------------------------------------
-> method = genefinder

              |         value
         site |         r          s |     Total
--------------+----------------------+----------
ciprofloxacin |       306      1,073 |     1,379 
  clindamycin |       345      1,034 |     1,379 
 erythromycin |       360      1,019 |     1,379 
  fusidicacid |       155      1,224 |     1,379 
   gentamicin |        77      1,302 |     1,379 
  methicillin |       395        984 |     1,379 
    mupirocin |        17      1,362 |     1,379 
   penicillin |     1,164        215 |     1,379 
   rifampicin |        24      1,355 |     1,379 
 tetracycline |       125      1,254 |     1,379 
 trimethoprim |       179      1,200 |     1,379 
   vancomycin |         0      1,379 |     1,379 
--------------+----------------------+----------
        Total |     3,147     13,401 |    16,548 


----------------------------------------------------------------------------------------------------------------------------------
-> method = typewriter

              |         value
         site |         r          s |     Total
--------------+----------------------+----------
ciprofloxacin |       306      1,073 |     1,379 
  clindamycin |       338      1,041 |     1,379 
 erythromycin |       354      1,025 |     1,379 
  fusidicacid |       151      1,228 |     1,379 
   gentamicin |        76      1,303 |     1,379 
  methicillin |       393        986 |     1,379 
    mupirocin |        15      1,364 |     1,379 
   penicillin |     1,161        218 |     1,379 
   rifampicin |        24      1,355 |     1,379 
 tetracycline |       121      1,258 |     1,379 
 trimethoprim |       176      1,203 |     1,379 
   vancomycin |         0      1,379 |     1,379 
--------------+----------------------+----------
        Total |     3,115     13,433 |    16,548 


----------------------------------------------------------------------------------------------------------------------------------
-> method = zam

              |         value
         site |         r          s |     Total
--------------+----------------------+----------
ciprofloxacin |       305      1,074 |     1,379 
  clindamycin |       355      1,024 |     1,379 
 erythromycin |       368      1,011 |     1,379 
  fusidicacid |       158      1,221 |     1,379 
   gentamicin |        79      1,300 |     1,379 
  methicillin |       395        984 |     1,379 
    mupirocin |        15      1,364 |     1,379 
   penicillin |     1,168        211 |     1,379 
   rifampicin |        24      1,355 |     1,379 
 tetracycline |       130      1,249 |     1,379 
 trimethoprim |       179      1,200 |     1,379 
   vancomycin |         0      1,379 |     1,379 
--------------+----------------------+----------
        Total |     3,176     13,372 |    16,548 



----------------------------------------------------------------------------------------------------------------------------------
-> site = ciprofloxacin

           |         value
    method |         r          s |     Total
-----------+----------------------+----------
genefinder |       306      1,073 |     1,379 
typewriter |       306      1,073 |     1,379 
       zam |       305      1,074 |     1,379 
-----------+----------------------+----------
     Total |       917      3,220 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = clindamycin

           |         value
    method |         r          s |     Total
-----------+----------------------+----------
genefinder |       345      1,034 |     1,379 
typewriter |       338      1,041 |     1,379 
       zam |       355      1,024 |     1,379 
-----------+----------------------+----------
     Total |     1,038      3,099 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = erythromycin

           |         value
    method |         r          s |     Total
-----------+----------------------+----------
genefinder |       360      1,019 |     1,379 
typewriter |       354      1,025 |     1,379 
       zam |       368      1,011 |     1,379 
-----------+----------------------+----------
     Total |     1,082      3,055 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = fusidicacid

           |         value
    method |         r          s |     Total
-----------+----------------------+----------
genefinder |       155      1,224 |     1,379 
typewriter |       151      1,228 |     1,379 
       zam |       158      1,221 |     1,379 
-----------+----------------------+----------
     Total |       464      3,673 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = gentamicin

           |         value
    method |         r          s |     Total
-----------+----------------------+----------
genefinder |        77      1,302 |     1,379 
typewriter |        76      1,303 |     1,379 
       zam |        79      1,300 |     1,379 
-----------+----------------------+----------
     Total |       232      3,905 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = methicillin

           |         value
    method |         r          s |     Total
-----------+----------------------+----------
genefinder |       395        984 |     1,379 
typewriter |       393        986 |     1,379 
       zam |       395        984 |     1,379 
-----------+----------------------+----------
     Total |     1,183      2,954 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = mupirocin

           |         value
    method |         r          s |     Total
-----------+----------------------+----------
genefinder |        17      1,362 |     1,379 
typewriter |        15      1,364 |     1,379 
       zam |        15      1,364 |     1,379 
-----------+----------------------+----------
     Total |        47      4,090 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = penicillin

           |         value
    method |         r          s |     Total
-----------+----------------------+----------
genefinder |     1,164        215 |     1,379 
typewriter |     1,161        218 |     1,379 
       zam |     1,168        211 |     1,379 
-----------+----------------------+----------
     Total |     3,493        644 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = rifampicin

           |         value
    method |         r          s |     Total
-----------+----------------------+----------
genefinder |        24      1,355 |     1,379 
typewriter |        24      1,355 |     1,379 
       zam |        24      1,355 |     1,379 
-----------+----------------------+----------
     Total |        72      4,065 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = tetracycline

           |         value
    method |         r          s |     Total
-----------+----------------------+----------
genefinder |       125      1,254 |     1,379 
typewriter |       121      1,258 |     1,379 
       zam |       130      1,249 |     1,379 
-----------+----------------------+----------
     Total |       376      3,761 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = trimethoprim

           |         value
    method |         r          s |     Total
-----------+----------------------+----------
genefinder |       179      1,200 |     1,379 
typewriter |       176      1,203 |     1,379 
       zam |       179      1,200 |     1,379 
-----------+----------------------+----------
     Total |       534      3,603 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = vancomycin

           |   value
    method |         s |     Total
-----------+-----------+----------
genefinder |     1,379 |     1,379 
typewriter |     1,379 |     1,379 
       zam |     1,379 |     1,379 
-----------+-----------+----------
     Total |     4,137 |     4,137 


counts differing between method: gene, mykrobe, type

   valueall |      Freq.     Percent        Cum.
------------+-----------------------------------
        sss |     13,366       80.77       80.77
        rrr |      3,111       18.80       99.57
        srs |         35        0.21       99.78
        rrs |         30        0.18       99.96
        rsr |          4        0.02       99.99
        rss |          2        0.01      100.00
------------+-----------------------------------
      Total |     16,548      100.00

              |                             valueall
         site |       rrr        rrs        rsr        rss        srs        sss |     Total
--------------+------------------------------------------------------------------+----------
ciprofloxacin |       304          0          2          0          1      1,072 |     1,379 
  clindamycin |       338          7          0          0         10      1,024 |     1,379 
 erythromycin |       354          6          0          0          8      1,011 |     1,379 
  fusidicacid |       151          4          0          0          3      1,221 |     1,379 
   gentamicin |        76          1          0          0          2      1,300 |     1,379 
  methicillin |       393          2          0          0          0        984 |     1,379 
    mupirocin |        15          0          0          2          0      1,362 |     1,379 
   penicillin |     1,161          3          0          0          4        211 |     1,379 
   rifampicin |        23          0          1          0          1      1,354 |     1,379 
 tetracycline |       121          4          0          0          5      1,249 |     1,379 
 trimethoprim |       175          3          1          0          1      1,199 |     1,379 
   vancomycin |         0          0          0          0          0      1,379 |     1,379 
--------------+------------------------------------------------------------------+----------
        Total |     3,111         30          4          2         35     13,366 |    16,548 






================================================================================
 1 add gold standard
================================================================================

    Result                           # of obs.
    -----------------------------------------
    not matched                             0

    matched                            16,548
        not updated                    16,548  (_merge==3)
        missing updated                     0  (_merge==4)
        nonmissing conflict                 0  (_merge==5)
    -----------------------------------------
predictive is gene, type, mykrobe

goldstanda |                             valueall
        rd |       rrr        rrs        rsr        rss        srs        sss |     Total
-----------+------------------------------------------------------------------+----------
         I |         6          0          0          0          0         74 |        80 
        NA |       288          8          0          0          9      1,699 |     2,004 
         R |     2,720          9          3          0          4         89 |     2,825 
         S |        97         13          1          2         22     11,504 |    11,639 
-----------+------------------------------------------------------------------+----------
     Total |     3,111         30          4          2         35     13,366 |    16,548 


----------------------------------------------------------------------------------------------------------------------------------
-> goldstandard = I

              |       valueall
         site |       rrr        sss |     Total
--------------+----------------------+----------
ciprofloxacin |         1         20 |        21 
  clindamycin |         0          2 |         2 
 erythromycin |         0          1 |         1 
  methicillin |         4         16 |        20 
    mupirocin |         0         24 |        24 
   penicillin |         1          4 |         5 
   rifampicin |         0          1 |         1 
 tetracycline |         0          1 |         1 
 trimethoprim |         0          5 |         5 
--------------+----------------------+----------
        Total |         6         74 |        80 


----------------------------------------------------------------------------------------------------------------------------------
-> goldstandard = NA

              |                  valueall
         site |       rrr        rrs        srs        sss |     Total
--------------+--------------------------------------------+----------
ciprofloxacin |         0          0          0          6 |         6 
  clindamycin |       136          5          8        764 |       913 
 erythromycin |         1          0          0          5 |         6 
  fusidicacid |         0          0          0          6 |         6 
   gentamicin |         0          0          0          6 |         6 
  methicillin |         3          0          0          3 |         6 
    mupirocin |         3          0          0        331 |       334 
   penicillin |         4          0          0          1 |         5 
   rifampicin |         0          0          0          6 |         6 
 tetracycline |         3          0          0          3 |         6 
 trimethoprim |       138          3          1        562 |       704 
   vancomycin |         0          0          0          6 |         6 
--------------+--------------------------------------------+----------
        Total |       288          8          9      1,699 |     2,004 


----------------------------------------------------------------------------------------------------------------------------------
-> goldstandard = R

              |                        valueall
         site |       rrr        rrs        rsr        srs        sss |     Total
--------------+-------------------------------------------------------+----------
ciprofloxacin |       299          0          2          0         15 |       316 
  clindamycin |       180          0          0          0          5 |       185 
 erythromycin |       342          0          0          0          6 |       348 
  fusidicacid |       144          3          0          2         13 |       162 
   gentamicin |        73          1          0          1         19 |        94 
  methicillin |       381          2          0          0          8 |       391 
    mupirocin |         6          0          0          0          0 |         6 
   penicillin |     1,124          2          0          1         10 |     1,137 
   rifampicin |        22          0          1          0          2 |        25 
 tetracycline |       112          1          0          0          5 |       118 
 trimethoprim |        37          0          0          0          6 |        43 
--------------+-------------------------------------------------------+----------
        Total |     2,720          9          3          4         89 |     2,825 


----------------------------------------------------------------------------------------------------------------------------------
-> goldstandard = S

              |                             valueall
         site |       rrr        rrs        rsr        rss        srs        sss |     Total
--------------+------------------------------------------------------------------+----------
ciprofloxacin |         4          0          0          0          1      1,031 |     1,036 
  clindamycin |        22          2          0          0          2        253 |       279 
 erythromycin |        11          6          0          0          8        999 |     1,024 
  fusidicacid |         7          1          0          0          1      1,202 |     1,211 
   gentamicin |         3          0          0          0          1      1,275 |     1,279 
  methicillin |         5          0          0          0          0        957 |       962 
    mupirocin |         6          0          0          2          0      1,007 |     1,015 
   penicillin |        32          1          0          0          3        196 |       232 
   rifampicin |         1          0          0          0          1      1,345 |     1,347 
 tetracycline |         6          3          0          0          5      1,240 |     1,254 
 trimethoprim |         0          0          1          0          0        626 |       627 
   vancomycin |         0          0          0          0          0      1,373 |     1,373 
--------------+------------------------------------------------------------------+----------
        Total |        97         13          1          2         22     11,504 |    11,639 



. cd E:\users\amy.mason\Pipeline_27_07_2016\
E:\users\amy.mason\Pipeline_27_07_2016

. run create_predict_viru.do
